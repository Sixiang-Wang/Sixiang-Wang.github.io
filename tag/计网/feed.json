{
    "version": "https://jsonfeed.org/version/1",
    "title": "机煲的小窝 • All posts by \"计网\" tag",
    "description": "",
    "home_page_url": "https://blog.unfinished.top",
    "items": [
        {
            "id": "https://blog.unfinished.top/2025/01/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0/",
            "url": "https://blog.unfinished.top/2025/01/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0/",
            "title": "计算机网络复习",
            "date_published": "2025-01-03T09:57:49.000Z",
            "content_html": "<img src=\"我要成为高手.png\" alt=\"我要成为高手\"  /> \n<h1>计算机网络概述</h1>\n<h3 id=\"层次划分\">层次划分</h3>\n<table>\n<thead>\n<tr>\n<th>OSI参考模型</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>应用层</td>\n<td>为用户或应用程序服务的接口</td>\n</tr>\n<tr>\n<td>表示层</td>\n<td>负责数据的表示、翻译和格式化</td>\n</tr>\n<tr>\n<td>会话层</td>\n<td>会话和对话控制</td>\n</tr>\n<tr>\n<td>传输层</td>\n<td>端到端的可靠数据传输服务</td>\n</tr>\n<tr>\n<td>网络层</td>\n<td>解决异构网络的问题</td>\n</tr>\n<tr>\n<td>数据链路层</td>\n<td>解决可靠性、解决共享信道</td>\n</tr>\n<tr>\n<td>物理层</td>\n<td>解决比特流在信道上传输的可行性</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>TCP/IP概念层次</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>应用层</td>\n</tr>\n<tr>\n<td>传输层</td>\n</tr>\n<tr>\n<td>网际层</td>\n</tr>\n<tr>\n<td>网络接口</td>\n</tr>\n</tbody>\n</table>\n<p>传输层：数据段</p>\n<p>网络层：分组</p>\n<p>数据链路层：数据帧</p>\n<p>物理层：比特</p>\n<blockquote>\n<p>[!TIP]</p>\n<blockquote>\n<p>玛德莫名其妙</p>\n</blockquote>\n<p>因特网采用TCP/IP体系结构</p>\n</blockquote>\n<h3 id=\"协议\">协议</h3>\n<p>网络协议的三要素</p>\n<ul>\n<li>语法：数据或控制信息的数据结构</li>\n<li>语义：协议元素的含义</li>\n<li>时序：信息的<strong>每一个单元或事件的传送或执行顺序</strong></li>\n</ul>\n<h3 id=\"性能指标\">性能指标</h3>\n<p>速率：b/s bps</p>\n<p>带宽：单位Hz，和bps本质一样</p>\n<p>吞吐量：单位时间通过网络的实际数据量</p>\n<p>信道利用率：有数据通过时间/总时间</p>\n<h1>物理层</h1>\n<h3 id=\"基本概念\">基本概念</h3>\n<p>信道：向某个方向传输信息的媒体</p>\n<p>信号：数据的电气或电磁表现</p>\n<p>码元：时间轴上的一个信号编码单元</p>\n<p>波特：码元传输速率单位</p>\n<p>比特率：数据传输速率</p>\n<h3 id=\"编码方式\">编码方式</h3>\n<img src=\"image-20241228202933127.png\" alt=\"image-20241228202933127\" style=\"zoom: 67%;\" /> \n<p>曼彻斯特：先低后高为0，先高后低为1</p>\n<p>差分曼彻斯特：前半个码元电平与前一个码元后半个相同为1，反之为0。（保持为1，取反为0）</p>\n<h3 id=\"尼奎斯特和香农公式\">尼奎斯特和香农公式</h3>\n<p>尼奎斯特：理想低通信道，无噪声</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>C</mi><mo>=</mo><mn>2</mn><mi>W</mi><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>M</mi><mspace linebreak=\"newline\"></mspace><mi>C</mi><mo>:</mo><mtext>传输率</mtext><mi>b</mi><mi mathvariant=\"normal\">/</mi><mi>s</mi><mspace linebreak=\"newline\"></mspace><mi>W</mi><mo>:</mo><mtext>带宽</mtext><mi>H</mi><mi>z</mi><mspace linebreak=\"newline\"></mspace><mi>M</mi><mo>:</mo><mtext>信号电平级数</mtext><mspace linebreak=\"newline\"></mspace><mn>2</mn><mi>W</mi><mtext>是码元最高传输速率</mtext><mi>M</mi><mtext>是码元能代表几种数据</mtext></mrow><annotation encoding=\"application/x-tex\">C = 2Wlog_2M\\\\\nC:传输率 b/s\\\\\nW:带宽Hz\\\\\nM:信号电平级数\\\\\n2W是码元最高传输速率\nM是码元能代表几种数据\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord cjk_fallback\">传</span><span class=\"mord cjk_fallback\">输</span><span class=\"mord cjk_fallback\">率</span><span class=\"mord mathnormal\">b</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">s</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord cjk_fallback\">带</span><span class=\"mord cjk_fallback\">宽</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord cjk_fallback\">信</span><span class=\"mord cjk_fallback\">号</span><span class=\"mord cjk_fallback\">电</span><span class=\"mord cjk_fallback\">平</span><span class=\"mord cjk_fallback\">级</span><span class=\"mord cjk_fallback\">数</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mord cjk_fallback\">是</span><span class=\"mord cjk_fallback\">码</span><span class=\"mord cjk_fallback\">元</span><span class=\"mord cjk_fallback\">最</span><span class=\"mord cjk_fallback\">高</span><span class=\"mord cjk_fallback\">传</span><span class=\"mord cjk_fallback\">输</span><span class=\"mord cjk_fallback\">速</span><span class=\"mord cjk_fallback\">率</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord cjk_fallback\">是</span><span class=\"mord cjk_fallback\">码</span><span class=\"mord cjk_fallback\">元</span><span class=\"mord cjk_fallback\">能</span><span class=\"mord cjk_fallback\">代</span><span class=\"mord cjk_fallback\">表</span><span class=\"mord cjk_fallback\">几</span><span class=\"mord cjk_fallback\">种</span><span class=\"mord cjk_fallback\">数</span><span class=\"mord cjk_fallback\">据</span></span></span></span></span></p>\n<p>香农公式：非理想信道计算</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>C</mi><mo>=</mo><mi>W</mi><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><mfrac><mi>S</mi><mi>N</mi></mfrac><mo stretchy=\"false\">)</mo><mspace linebreak=\"newline\"></mspace><mi>C</mi><mo>:</mo><mtext>传输率，</mtext><mi>b</mi><mi mathvariant=\"normal\">/</mi><mi>s</mi><mspace linebreak=\"newline\"></mspace><mi>W</mi><mo>:</mo><mtext>带宽，</mtext><mi>H</mi><mi>z</mi><mspace linebreak=\"newline\"></mspace><mfrac><mi>S</mi><mrow><msub><mi>N</mi><mi>d</mi></msub><mi>b</mi></mrow></mfrac><mo>:</mo><mtext>信噪比，</mtext><mi>d</mi><mi>B</mi><mspace linebreak=\"newline\"></mspace><mfrac><mi>S</mi><mi>N</mi></mfrac><mo>=</mo><mn>1</mn><msup><mn>0</mn><mrow><mfrac><mi>S</mi><msub><mi>N</mi><mrow><mi>d</mi><mi>b</mi></mrow></msub></mfrac><mi mathvariant=\"normal\">/</mi><mn>10</mn></mrow></msup><mspace linebreak=\"newline\"></mspace><mtext>若带宽</mtext><mi>W</mi><mo>=</mo><mn>3</mn><mi>K</mi><mi>H</mi><mi>z</mi><mtext>，信噪比</mtext><mn>30</mn><mi>d</mi><mi>B</mi><mi>C</mi><mo>=</mo><mn>3000</mn><mo>∗</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup><mo stretchy=\"false\">)</mo><mo>=</mo><mn>30000</mn><mi>b</mi><mi mathvariant=\"normal\">/</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">C=Wlog_2(1+\\frac{S}{N})\\\\\nC:传输率，b/s\\\\\nW:带宽，Hz\\\\\n\\frac{S}{N_db}:信噪比，dB\\\\\n\\frac{S}{N}=10^{\\frac{S}{N_{db}}/10}\\\\\n若带宽W=3KHz，信噪比30dB\nC=3000*log_2(1+10^3)=30000b/s\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.04633em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord cjk_fallback\">传</span><span class=\"mord cjk_fallback\">输</span><span class=\"mord cjk_fallback\">率</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathnormal\">b</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">s</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord cjk_fallback\">带</span><span class=\"mord cjk_fallback\">宽</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:2.19633em;vertical-align:-0.8360000000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.3139999999999996em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">d</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">b</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8360000000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord cjk_fallback\">信</span><span class=\"mord cjk_fallback\">噪</span><span class=\"mord cjk_fallback\">比</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:2.04633em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1338350000000001em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1338350000000001em;\"><span style=\"top:-3.5233700000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mopen nulldelimiter sizing reset-size3 size6\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8720928571428572em;\"><span style=\"top:-2.656em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3448em;margin-left:-0.10903em;margin-right:0.1em;\"><span class=\"pstrut\" style=\"height:2.69444em;\"></span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.34963999999999995em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.2255000000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line mtight\" style=\"border-bottom-width:0.049em;\"></span></span><span style=\"top:-3.384em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5937428571428571em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter sizing reset-size3 size6\"></span></span><span class=\"mord mtight\">/</span><span class=\"mord mtight\">1</span><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord cjk_fallback\">若</span><span class=\"mord cjk_fallback\">带</span><span class=\"mord cjk_fallback\">宽</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mord cjk_fallback\">，</span><span class=\"mord cjk_fallback\">信</span><span class=\"mord cjk_fallback\">噪</span><span class=\"mord cjk_fallback\">比</span><span class=\"mord\">3</span><span class=\"mord\">0</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1141079999999999em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">3</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord mathnormal\">b</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">s</span></span></span></span></span></p>\n<h1>数据链路层</h1>\n<p>如何在有差错的线路上，进行无差错传输</p>\n<p>组帧，以7E开头（01111110）</p>\n<p><strong>基本功能：</strong></p>\n<ul>\n<li>链路管理：数据链路的建立、维护和释放</li>\n<li>定界与同步：能够从接受到的比特流当中准确的区分出一帧的开始和结束</li>\n<li>差错控制：纠错和差错检测</li>\n<li>流量控制：调节通讯双方通讯速度</li>\n<li>寻址：确保每一帧能够到达正确的目的端</li>\n</ul>\n<h2 id=\"差错检测和纠正\">差错检测和纠正</h2>\n<h3 id=\"奇偶校验\">奇偶校验</h3>\n<p>原始数据最后增加一个比特位，让结果中1的个数为奇数（奇校验）或者偶数（偶校验）</p>\n<p>原始数据11010采用偶校验 👉新数据为110101</p>\n<h3 id=\"循环冗余校验（CRC）\">循环冗余校验（CRC）</h3>\n<p>约定一个多项式G(x)假设为x^4+x+1，即10011</p>\n<p>在带校验数据后补上4个0（因为Gx最高阶为4）</p>\n<p>带校验数据1101011011→11010110110000</p>\n<p>用<strong>模2除法</strong>把带校验数据除以G（x）</p>\n<blockquote>\n<p>[!WARNING]</p>\n<p><u><em><strong>不是除法！</strong></em></u></p>\n</blockquote>\n<p><img src=\"image-20241229143856682.png\" alt=\"image-20241229143856682\"></p>\n<p>最后结果为1101,0110,1111,10</p>\n<h2 id=\"数据链路层协议\">数据链路层协议</h2>\n<p>假设没有出错可以使用：</p>\n<p><strong>具有最简单流量控制的协议</strong></p>\n<p>发送方：</p>\n<ol>\n<li>取数据帧</li>\n<li>送到数据链路层发送缓存</li>\n<li>发送</li>\n<li>等待</li>\n<li>接受到接收节点的确认信息，转到1</li>\n</ol>\n<p>接收方</p>\n<ol>\n<li>等待</li>\n<li>收到数据帧，存到缓存</li>\n<li>缓存上交到主机</li>\n<li>发送确认信息到发送方</li>\n<li>转到1</li>\n</ol>\n<p><img src=\"image-20241229144818995.png\" alt=\"image-20241229144818995\"></p>\n<h3 id=\"停止等待协议\">停止等待协议</h3>\n<p><img src=\"image-20241229144955608.png\" alt=\"image-20241229144955608\"></p>\n<p><strong>一个比特可表示</strong> <strong>0</strong> <strong>和</strong> <strong>1</strong> <strong>两种不同的序号</strong></p>\n<p>确认帧带有序号，ACKn表示n-1号帧已经收到，<strong>期望接收</strong>第 n号帧</p>\n<p>ACK1表示收到0号帧；ACK0表示收到1号帧</p>\n<p><strong>发送方</strong></p>\n<img src=\"image-20241229152149769.png\" alt=\"image-20241229152149769\" style=\"zoom: 45%;\" /> \n<p><strong>接收方</strong></p>\n<img src=\"image-20241229152209500.png\" alt=\"image-20241229152209500\" style=\"zoom:45%;\" />  \n<p><strong>停止等待协议流图</strong></p>\n<p><img src=\"image-20241229152854873.png\" alt=\"image-20241229152854873\"></p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>R</mi><mi>T</mi><mi>T</mi><mtext>：往返时延</mtext><mspace linebreak=\"newline\"></mspace><msub><mi>T</mi><mi>D</mi></msub><mtext>：分组的发送时延</mtext><mspace linebreak=\"newline\"></mspace><msub><mi>T</mi><mi>A</mi></msub><mtext>：确认的发送时延</mtext></mrow><annotation encoding=\"application/x-tex\">RTT：往返时延\\\\\nT_D：分组的发送时延\\\\\nT_A：确认的发送时延\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord cjk_fallback\">：</span><span class=\"mord cjk_fallback\">往</span><span class=\"mord cjk_fallback\">返</span><span class=\"mord cjk_fallback\">时</span><span class=\"mord cjk_fallback\">延</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord cjk_fallback\">：</span><span class=\"mord cjk_fallback\">分</span><span class=\"mord cjk_fallback\">组</span><span class=\"mord cjk_fallback\">的</span><span class=\"mord cjk_fallback\">发</span><span class=\"mord cjk_fallback\">送</span><span class=\"mord cjk_fallback\">时</span><span class=\"mord cjk_fallback\">延</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">A</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord cjk_fallback\">：</span><span class=\"mord cjk_fallback\">确</span><span class=\"mord cjk_fallback\">认</span><span class=\"mord cjk_fallback\">的</span><span class=\"mord cjk_fallback\">发</span><span class=\"mord cjk_fallback\">送</span><span class=\"mord cjk_fallback\">时</span><span class=\"mord cjk_fallback\">延</span></span></span></span></span></p>\n<h3 id=\"连续ARQ：后退N帧协议GBN\">连续ARQ：后退N帧协议GBN</h3>\n<p><img src=\"image-20241229161544583.png\" alt=\"image-20241229161544583\"></p>\n<p><strong>接收端只按序接收数据帧</strong>：收到出错的DATA2后，虽然收到了Data3-5但是要丢弃，并且重传ACK2（因为DATA2出错，希望得到DATA2）</p>\n<p><strong>发送端计时器超时重传</strong>：等不到ACK3，超时后从DATA2开始全部重传</p>\n<h3 id=\"选择重传协议\">选择重传协议</h3>\n<p>接收端的滑动窗口大于1，</p>\n<p>发送端超时没有收到ACK(n)  就重发 Data(n)，<strong>不会全部重发</strong></p>\n<h3 id=\"滑动窗口\">滑动窗口</h3>\n<p><strong>连续</strong> <strong>ARQ</strong>协议中，<strong>接收窗口</strong>大小为1</p>\n<ul>\n<li><strong>只有当收到的帧的序号与接收窗口一致时才能接收该帧</strong></li>\n<li>收到一个序号正确的帧，<strong>接收窗口就向前滑动</strong>，同时发送ACK</li>\n</ul>\n<p>接收窗口向前滑动→发送确认→发送窗口可能向前滑动</p>\n<p><strong>当用</strong> <strong>n</strong> <strong>个比特进行编号</strong>：滑动窗口最大  <u>2^n <strong>- 1</strong></u></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>发送窗口</th>\n<th>接收窗口</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>停止等待协议</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>连续ARQ（后退N帧协议）</td>\n<td>&gt;1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>选择重传协议</td>\n<td>&gt;1</td>\n<td>&gt;1</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"信道利用率\">信道利用率</h3>\n<p><strong>T（发送周期）：从开始发送数据到收到第一个确认帧为止</strong></p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>信道利用率</mtext><mo>=</mo><mfrac><mi>L</mi><mi>C</mi></mfrac><mo>×</mo><mfrac><mn>1</mn><mi>T</mi></mfrac><mspace linebreak=\"newline\"></mspace><mfrac><mi>L</mi><mi>C</mi></mfrac><mo>:</mo><mtext>发送数据所用时长</mtext><mspace linebreak=\"newline\"></mspace><mi>L</mi><mo>:</mo><mi>T</mi><mtext>时间内发送的数据数量</mtext><mspace linebreak=\"newline\"></mspace><mi>C</mi><mo>:</mo><mtext>发送传输率</mtext></mrow><annotation encoding=\"application/x-tex\">信道利用率=\\frac{L}{C}\\times\\frac{1}{T}\\\\\n\\frac{L}{C}:发送数据所用时长\\\\\nL:T时间内发送的数据数量\\\\\nC:发送传输率\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord cjk_fallback\">信</span><span class=\"mord cjk_fallback\">道</span><span class=\"mord cjk_fallback\">利</span><span class=\"mord cjk_fallback\">用</span><span class=\"mord cjk_fallback\">率</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.04633em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:2.04633em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord cjk_fallback\">发</span><span class=\"mord cjk_fallback\">送</span><span class=\"mord cjk_fallback\">数</span><span class=\"mord cjk_fallback\">据</span><span class=\"mord cjk_fallback\">所</span><span class=\"mord cjk_fallback\">用</span><span class=\"mord cjk_fallback\">时</span><span class=\"mord cjk_fallback\">长</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord cjk_fallback\">时</span><span class=\"mord cjk_fallback\">间</span><span class=\"mord cjk_fallback\">内</span><span class=\"mord cjk_fallback\">发</span><span class=\"mord cjk_fallback\">送</span><span class=\"mord cjk_fallback\">的</span><span class=\"mord cjk_fallback\">数</span><span class=\"mord cjk_fallback\">据</span><span class=\"mord cjk_fallback\">数</span><span class=\"mord cjk_fallback\">量</span></span><span class=\"mspace newline\"></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord cjk_fallback\">发</span><span class=\"mord cjk_fallback\">送</span><span class=\"mord cjk_fallback\">传</span><span class=\"mord cjk_fallback\">输</span><span class=\"mord cjk_fallback\">率</span></span></span></span></span></p>\n<h3 id=\"HDLC和PPP\">HDLC和PPP</h3>\n<p>主站：<strong>负责控制整个链路的操作</strong>，<strong>由主站发出的帧为命令</strong></p>\n<p>从站：<strong>在主站的控制下进行操作</strong>，<strong>由从站发出的帧为响应</strong></p>\n<p><strong>链路结构</strong></p>\n<p>非平衡：一个主站多个从站</p>\n<p>平衡：两个组合站</p>\n<p><strong>HDLC</strong></p>\n<p>真的。。。会考？吗？</p>\n<p>考研不考。</p>\n<p><img src=\"image-20241229192411603.png\" alt=\"image-20241229192411603\"></p>\n<p><strong>PPP：点对点</strong></p>\n<p>不是总线型，不适用CSMA/CD</p>\n<p>用于<strong>广域网</strong></p>\n<p><img src=\"image-20241229192309151.png\" alt=\"image-20241229192309151\"></p>\n<p>异步传输采用转义法，填入转义字符0x7D</p>\n<p>同步传输采用零比特填充法，连续5个1后填入1个0</p>\n<h2 id=\"局域网的数据链路层\">局域网的数据链路层</h2>\n<p><strong>信道共享技术</strong></p>\n<p>随缘看看？</p>\n<p>静态划分：</p>\n<ul>\n<li>频分复用：不同频率上传输</li>\n<li>时分复用：带宽一样，变成多个时间片依次发送</li>\n<li>波分复用：<strong>光</strong>的频分复用</li>\n<li>码分复用：每个端都有个自己的码，互相正交。发1则把码发出去，发0则发取反码。</li>\n</ul>\n<p>动态媒体介入控制：</p>\n<ul>\n<li>随机接入：ALOHA（接收方判断冲突，发送方超时重传）、CSMA</li>\n<li>轮询：<strong>令牌环网传递令牌，有空令牌的才发，收到令牌看是不是给自己的，不是接着传，是的话复制一份接着传，转一圈发现没出错就变成空令牌</strong>（负载严重时能较好的工作）</li>\n</ul>\n<h3 id=\"CSMA-CD\">CSMA/CD</h3>\n<h4 id=\"CMSA\">CMSA</h4>\n<p>CS：载波监听，发送前会先检测总线上是否有人发数据</p>\n<p>MA：多点接入，多个计算机接在一个总线</p>\n<p>1-坚持CSMA：空闲就发，忙则一直监听，冲突则等待一个随机时间再监听</p>\n<p>非坚持CSMA：空闲就发，忙则等待一个随机时间再监听</p>\n<p>p-坚持CSMA：空闲则以p概率发，1-p概率等下一个时间单位再发；忙则一直监听；冲突则等待一个时间单位再监听</p>\n<blockquote>\n<p>[!NOTE]</p>\n<p>这是重点</p>\n</blockquote>\n<h4 id=\"CD\">CD</h4>\n<p>CD：碰撞检测</p>\n<p><img src=\"image-20241229202154923.png\" alt=\"image-20241229202154923\"></p>\n<p>为了检测冲突，最小帧长为 2 * Prop * 传输速率（确保传完之前能检测到碰撞）</p>\n<p>Prop = 线路长度/电磁波在传播速度</p>\n<p><strong>2Prop</strong>为争用期，也称碰撞窗口</p>\n<p>以太网取51.2μs为争用期，对于10Mb/s的以太网，成勇气可以发送512bit也就是64字节。若前64字节没有冲突，那么后续也不会冲突。</p>\n<p>以太网取64字节为最短有效帧长</p>\n<p>发生碰撞后，推迟一段时间才能发送，基本退避时间一般取争用期2T</p>\n<p>k = min[重传次数, 10]，从[0,2^k   -1]随机取一个r，重传等待的时间为<strong>r倍的2T</strong></p>\n<p>当重传达到16次还是不成功，说明网络拥挤，直接抛弃此帧报告出错。</p>\n<h3 id=\"MAC地址\">MAC地址</h3>\n<p>48位Mac地址，每一台主机都有独立标识符，通常是12个十六进制数来表示</p>\n<p>mac地址举例（01:23:45:67:89:AB）</p>\n<p>目的地址和源地址都是6字节（48位）</p>\n<p>类型指明<strong>网络层</strong>使用的协议，因为<strong>64字节为最短有效帧长</strong>（上面说了），所以数据段最短为<strong>46字节</strong></p>\n<p>FCS：采用CRC校验</p>\n<img src=\"image-20241229220712926.png\" alt=\"image-20241229220712926\" style=\"zoom:100%;\" /> \n<p>为什么没有结束的“后导”码：采用曼彻斯特编码，发送的时候1为前高后低，0为前低后高；发完了直接就没信号了，电平不变</p>\n<h3 id=\"局域网和VLAN\">局域网和VLAN</h3>\n<p>VLAN是虚拟局域网</p>\n<p>创建VLAN后交换机转发表形如：</p>\n<table>\n<thead>\n<tr>\n<th>MAC地址</th>\n<th>端口</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>A的地址</td>\n<td>1</td>\n</tr>\n<tr>\n<td>B的地址</td>\n<td>2</td>\n</tr>\n<tr>\n<td>C的地址</td>\n<td>3</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>VLAN ID</th>\n<th>端口</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td>2</td>\n</tr>\n<tr>\n<td>2</td>\n<td>3</td>\n</tr>\n</tbody>\n</table>\n<p>交换机之间建立VLAN发送数据会在数据帧插入VLAN标记</p>\n<p><img src=\"image-20241230141150645.png\" alt=\"image-20241230141150645\"></p>\n<h4 id=\"网桥\">网桥</h4>\n<p>网桥会通过数据 学习 不同地址对应的接口。</p>\n<p><img src=\"image-20241230143307475.png\" alt=\"image-20241230143307475\"></p>\n<ul>\n<li>使用网桥能够隔开各个网段的碰撞域</li>\n<li>扩大物理范围</li>\n<li>提高可靠性</li>\n<li>过滤通信量，增大吞吐量</li>\n</ul>\n<p>但是只能用于用户不太多的局域网，</p>\n<ul>\n<li>广播信息过多会产生广播风暴</li>\n</ul>\n<h4 id=\"其他概念\">其他概念</h4>\n<p>交换机：学习、转发、过滤</p>\n<p>冲突域：任意时刻，<strong>一个碰撞域中，只能有一个站在发送数据</strong></p>\n<p>广播域：<strong>同一广播包能到达的所有设备集合</strong></p>\n<h3 id=\"交换机和路由器\">交换机和路由器</h3>\n<p>交换机能划分冲突域，<strong>不划分广播域</strong></p>\n<p>路由器可以划分广播域</p>\n<h1>网络层</h1>\n<p>网络层功能：</p>\n<ul>\n<li>路由选择和分组转发，找到最佳路径</li>\n<li>异构网络的互联</li>\n<li>拥塞控制</li>\n<li>尽最大可能交付</li>\n<li><strong>不可靠传输！</strong></li>\n</ul>\n<img src=\"image-20241230173853910.png\" alt=\"image-20241230173853910\" style=\"zoom:80%;\" /> \n<p><strong>因特网采用数据报形式</strong></p>\n<p><strong>为什么要有IP地址和MAC地址两种地址：</strong></p>\n<p><strong>IP 地址</strong>解决了设备在大规模网络中的定位和路由问题，适用于网络间通信。</p>\n<p><strong>MAC 地址</strong>解决了局域网中设备的物理标识和直接通信问题。</p>\n<p>MAC地址是固定的，无法适应网络位置变化，难以支持跨网络分组转发</p>\n<h2 id=\"IP数据报\">IP数据报</h2>\n <img src=\"image-20241230174447326.png\" alt=\"image-20241230174447326\" style=\"zoom: 30%;\" /> \n<ul>\n<li>首部长度：记录数据报头部长度。<strong>单位是4Byte</strong>也就是32bit。因为报文头部固定部分长度为<strong>20B</strong>，所以首部长度最少是5（0101），最大为15（1111）</li>\n<li>区分服务：服务的类型</li>\n<li>总长度：整个IP数据报文长度。<strong>单位是1Byte</strong>，所以IP报文理论最大上限长度是2^16-1 = 65535 Byte</li>\n<li>生存时间：TTL，没经过一个路由器-1</li>\n<li>协议：<img src=\"image-20241230175457883.png\" alt=\"image-20241230175457883\" style=\"zoom: 67%;\" /></li>\n</ul>\n<h3 id=\"数据报分片\">数据报分片</h3>\n<p><strong>数据链路层有最大长度限制，所以需要把IP数据报文分片。</strong></p>\n<img src=\"image-20241230192714482.png\" alt=\"image-20241230192714482\" style=\"zoom:50%;\" /> \n<p>假如数据长度2200字节，MTU现在设定最大820字节，IP头部20字节，那么需要分成（820，820，620）三个片</p>\n<img src=\"image-20241230193107372.png\" alt=\"image-20241230193107372\" style=\"zoom: 67%;\" />  \n<ul>\n<li>\n<p>标识：确定不同分片对应的的数据报文，为了后续拼接</p>\n</li>\n<li>\n<p>标志：占三个位：空位 DF MF；</p>\n<ul>\n<li>DF=1禁止分片，DF=0允许分片；</li>\n<li>MF=1表示后面还有分片，MF=0代表是最后一个分片</li>\n</ul>\n</li>\n<li>\n<p>片偏移以 <strong>8Byte</strong> 为单位<img src=\"image-20241230215535927.png\" alt=\"image-20241230215535927\" style=\"zoom: 67%;\" /></p>\n</li>\n</ul>\n<blockquote>\n<p>[!IMPORTANT]</p>\n<p><strong><u>奇奇怪怪的单位</u></strong></p>\n<p>首部长度：以4Byte为单位</p>\n<p>总长度：以1Byte为单位</p>\n<p>片偏移：以8Byte为单位</p>\n</blockquote>\n<h3 id=\"IP地址划分\">IP地址划分</h3>\n<p><img src=\"image-20241230222944661.png\" alt=\"image-20241230222944661\"></p>\n<p><img src=\"image-20241231143140233.png\" alt=\"image-20241231143140233\"></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0.0.0.0</td>\n<td>缺省路由</td>\n<td>可作为源地址，不可以作为目的地址</td>\n</tr>\n<tr>\n<td>255.255.255.255</td>\n<td>广播地址</td>\n<td>不可作为源地址，可以作为目的地址</td>\n</tr>\n<tr>\n<td>网络位全0</td>\n<td>网络内，本机IP地址的主机部份</td>\n<td>可作为源地址，不可以作为目的地址</td>\n</tr>\n<tr>\n<td>主机号全0</td>\n<td>代表网络的地址</td>\n<td>不可作为源地址，不可以作为目的地址</td>\n</tr>\n<tr>\n<td>主机号全1</td>\n<td>网络内广播</td>\n<td>可作为源地址，不可以作为目的地址</td>\n</tr>\n<tr>\n<td>127.x.x.x</td>\n<td>本地软件Loopback测试</td>\n<td>可作为源地址，可以作为目的地址</td>\n</tr>\n</tbody>\n</table>\n<p>不同网段的<strong>私有IP地址</strong>：仅能内部使用</p>\n<table>\n<thead>\n<tr>\n<th>地址类别</th>\n<th>地址范围</th>\n<th>网段个数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>A</td>\n<td>10.0.0.0 - 10.255.255.255</td>\n<td>1</td>\n</tr>\n<tr>\n<td>B</td>\n<td>172.16.0.0 - 172.31.255.255</td>\n<td>16</td>\n</tr>\n<tr>\n<td>C</td>\n<td>192.168.0.0 - 192.168.255.255</td>\n<td>256</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"IP子网掩码\">IP子网掩码</h3>\n<img src=\"image-20241231150034788.png\" alt=\"image-20241231150034788\" style=\"zoom:67%;\" /> \n<p><strong>子网掩码与IP地址相与，即可获得网络地址</strong></p>\n<p>例：</p>\n<p>子网掩码255.255.192.0；IP地址141.14.72.24</p>\n<p>网络地址为：141.14.64.0</p>\n<blockquote>\n<p>[!WARNING]</p>\n<p><strong>易错例题</strong></p>\n<p>主机ip为180.80.77.55；掩码255.255.252.0，发送广播分组的目的地址为</p>\n<p>1111 1100</p>\n<p>0100 1101</p>\n<p>0100 1100=76   但是广播地址要给主机号全变成1，所以是：</p>\n<p>0100 11<u><strong>11</strong></u> . 11111111</p>\n<p>结果：180.80.79.255</p>\n</blockquote>\n<h3 id=\"无分类编址CIDR\">无分类编址CIDR</h3>\n<p>消除了传统A、B、C类地址和划分子网的概念</p>\n<img src=\"image-20241231155327072.png\" alt=\"image-20241231155327072\" style=\"zoom:67%;\" />  \n<p><strong>全0：本网络；全1：广播</strong></p>\n<img src=\"image-20241231155457787.png\" alt=\"image-20241231155457787\" style=\"zoom: 67%;\" /> \n<p><strong>构成超网</strong></p>\n<img src=\"image-20241231155943052.png\" alt=\"image-20241231155943052\" style=\"zoom:67%;\" /> \n<ul>\n<li>.00100000.</li>\n<li>.00101000.</li>\n<li>.00110000.</li>\n<li>.00111000.</li>\n<li>最后构成35.230.32.0/19</li>\n</ul>\n<p><strong>最长前缀匹配</strong></p>\n<p>查路由表若有多个匹配结果，则<strong>发给有最长网络前缀</strong>的路由</p>\n<h3 id=\"ARP和ICMP协议\">ARP和ICMP协议</h3>\n<img src=\"image-20241231172034292.png\" alt=\"image-20241231172034292\" style=\"zoom: 50%;\" />  \n<h4 id=\"ARP\">ARP</h4>\n<p>在网络层，发送方只知道对方的IP地址，所以：</p>\n<p><strong>首先检查ARP缓存看有没有已经存好的地址</strong>，没有就用FF-FF-FF-FF-FF-FF发送广播ARP请求分组，收到请求的主机响应，返回MAC地址，随后发送方得到MAC地址。</p>\n<p>如果是跨交换机，发送方得到的是交换机的MAC地址。交换机会再接着发</p>\n<img src=\"image-20241231170051028.png\" alt=\"image-20241231170051028\" style=\"zoom:67%;\" />  \n<p><strong>四种典型情况：</strong></p>\n<ol>\n<li>主机A发送到本网络主机B：用ARP找到B的硬件地址</li>\n<li>主机A发送给另一网络的主机B：用ARP找到本网络的一个路由器硬件地址</li>\n<li>路由器发给本网络主机A：用ARP找到A的硬件地址</li>\n<li>路由器发送给另一网络的主机B：用ARP找到本网络的另一个路由器硬件地址</li>\n</ol>\n<p>**RARP：**很神奇喔，自己不知道自己IP地址，要通过自己的MAC地址询问服务器自己的IP是多少</p>\n<h4 id=\"DHCP\">DHCP</h4>\n<p>给主机动态分配IP，是应用层协议，用UDP</p>\n<h4 id=\"ICMP\">ICMP</h4>\n<p><strong>ICMP报文装填在IP报文数据部分</strong>，但是是<strong>网络层协议</strong></p>\n<p>为了报告差错和异常，可以用来ping、traceroute</p>\n<img src=\"image-20241231172532499.png\" alt=\"image-20241231172532499\" style=\"zoom: 67%;\" />  \n<ul>\n<li>类型</li>\n<li>代码：拓展</li>\n<li>检验和：检验首部</li>\n</ul>\n<h5 id=\"ICMP差错报文\"><strong>ICMP差错报文</strong></h5>\n<ol>\n<li>终点不可达：路由器或主机<strong>无法交付</strong>报文</li>\n<li>源点抑制：<strong>拥塞</strong>而丢弃</li>\n<li>时间超过：当路由器收到生存时间<strong>TTL=0</strong>的数据报文时，先丢弃该报文，再向远点发送时间超过报文</li>\n<li>参数问题：路由器或目的主机收到的<strong>首部字段有误</strong>，发送参数问题报文</li>\n<li>改变路由（重定向）：路由器发送该报文到主机，让主机知道下次的数据包应该发送给另外的路由器（可能是更好的路由）</li>\n</ol>\n<p><strong>差错报文的ICMP数据字段</strong></p>\n<img src=\"image-20241231173246830.png\" alt=\"image-20241231173246830\" style=\"zoom: 67%;\" />  \n<blockquote>\n<p>[!NOTE]</p>\n<p>对<strong>差错报文</strong>不再发送差错报文</p>\n<p>对第一个数据分片后的<strong>后续分片</strong>不发送ICMP差错报文</p>\n<p>对具有<strong>组播</strong>地址的数据报不发送ICMP差错报文</p>\n<p>对<strong>特殊地址</strong>（127.0.0.0或0.0.0.0）不发送ICMP差错报文</p>\n</blockquote>\n<h5 id=\"ICMP询问报文\">ICMP询问报文</h5>\n<ol>\n<li>回送请求和回答报文</li>\n<li>时间戳请求和回答报文</li>\n</ol>\n<h4 id=\"IGMP\">IGMP</h4>\n<p>提供带<u><strong>多播组</strong></u>标识的路由，让整个网络都支持多播</p>\n<p>用于管理主机与多播组的关系</p>\n<h2 id=\"路由选择协议\">路由选择协议</h2>\n<p>内部网关西医：RIP、OSPF</p>\n<p>外部网关协议：BGP</p>\n<h3 id=\"RIP协议\">RIP协议</h3>\n<p>距离：跳数。从路由器到直接相连的网络距离为1，经过一个路由器+1</p>\n<p>距离最大为16，一条路由最多只能包含15个路由器。RIP只适用于小型网络</p>\n<img src=\"image-20241231195543964.png\" alt=\"image-20241231195543964\" style=\"zoom:67%;\" /> \n<p><strong>格式</strong></p>\n<table>\n<thead>\n<tr>\n<th>网络</th>\n<th>距离</th>\n<th>下一跳</th>\n</tr>\n</thead>\n</table>\n<p>每30s和邻居交换一次路由信息，交换的信息是本路由器的全部信息。</p>\n<ol>\n<li>把地址为X的路由器中发来的RIP报文中所有项目，地址改为X，距离为报文中距离+1</li>\n<li>对修改后的RIP报文中每一个项目进行：\n<ul>\n<li>路由表没有对应Net，填入</li>\n<li>路由表有对应Net，\n<ul>\n<li>若原有下一跳是X，直接替换</li>\n<li>若原有下一跳不是X，比较距离，保留短的</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>若180s没收到X发来的更新路由表信息，把X对应表项距离设置为16，意思是不可达</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>IP首部</th>\n<th>UDP首部</th>\n<th>RIP报文</th>\n</tr>\n</thead>\n</table>\n<p><strong>RIP报文在UDP的数据报中</strong>，所以RIP是应用层协议</p>\n<p><strong>一个RIP报文最多传送25个路由表项</strong>，如果表项太多需要发多个RIP报文</p>\n<p><strong>RIP中好消息传的快、坏消息传的慢</strong>，解决方案：</p>\n<ul>\n<li>水平分割：禁止把一条路由信息从收到这条路由信息的接口广播出去</li>\n<li>保持：当一个网络不可达后，一段时间内忽略其他路由发来的该网络信息</li>\n<li>触发更新：一旦网络不可达，直接广播，不等待下一个广周期到</li>\n</ul>\n<h3 id=\"OSPF协议\">OSPF协议</h3>\n<p>用了Dijkstra的最短路径SPF算法</p>\n<p>OSPF使用洪泛法，向所有服务器发送</p>\n<p>直接使用IP报文发，没有UDP包装，是网络层协议</p>\n<p>只有链路状态变化，才会发送信息</p>\n<p>OSPF不使用RIP的距离，使用“度量”metric</p>\n<p>存储全网拓扑结构图</p>\n<p>OSPF还会划分区域</p>\n<img src=\"image-20241231233656203.png\" alt=\"image-20241231233656203\" style=\"zoom:67%;\" />  \n<h3 id=\"BGP\">BGP</h3>\n<p>外部通讯协议</p>\n<p>用TCP</p>\n<p>PPT里没有</p>\n<h1>传输层</h1>\n<p>传输层功能：</p>\n<ul>\n<li>应用进程之间的逻辑通信</li>\n<li>复用和分用（复用：不同进程可用同一个协议；分用：接收方传输层剥去首部课正确交付）</li>\n<li>检错检测</li>\n<li>提供面向连接和无连接的传输协议</li>\n</ul>\n<h3 id=\"端口号\">端口号</h3>\n<p>1-65535其中：</p>\n<p>1-1024：熟知端口，用于常用应用程序，如ftp 21，smtp 25等</p>\n<p>1024-49151：注册端口</p>\n<p>49152-65535：客户端进程动态生成</p>\n<p>嵌套字Socket格式 = IP地址：端口号</p>\n<h2 id=\"UDP\">UDP</h2>\n<p><strong>无连接</strong>，<strong>不可靠</strong>（只会尽最大努力交付），简单，包头小</p>\n<p>首部简单：</p>\n<img src=\"1735711096881.png\" alt=\"1735711096881\" style=\"zoom: 67%;\" />  \n<p>UDP报文长度：头部加上数据</p>\n<p>校验部分添加伪首部校验</p>\n<p>UDP常见应用：</p>\n<ul>\n<li>DNS域名服务</li>\n<li>SNMP简单网络协议</li>\n<li>RIP路由信息协议</li>\n<li>P2P点对点通信</li>\n</ul>\n<h2 id=\"TCP\">TCP</h2>\n<p><strong>面向连接，可靠</strong>有序，不丢失不重复</p>\n<p>全双工通信，面向字节流</p>\n<h3 id=\"TCP报文头部\">TCP报文头部</h3>\n<img src=\"image-20250101144607767.png\" alt=\"image-20250101144607767\" style=\"zoom: 67%;\" />  \n<ul>\n<li>每个<strong>端口</strong>占16位（1-65535）</li>\n<li><strong>序号</strong>：表示本报文发送的数据第一个<strong>字节</strong>的序号，注意是字节的序号</li>\n<li><strong>确认号</strong>：期望收到的下一个报文的第一个数据<strong>字节</strong>的序号。若为N，则说明N-1位置的数据都已经收到</li>\n<li>数据偏移：就是首部长度，<strong>单位是4字节</strong></li>\n<li>保留字段：全为0</li>\n<li><strong>6个控制位</strong>：\n<ul>\n<li><strong>URG紧急位</strong>：置为1时，说明是紧急文件，要尽快发送【发送方紧急】</li>\n<li><strong>ACK确认位</strong>：=1确认号有效，建立连接后应该一直为1</li>\n<li>PSH推送位：=1时接收方应尽快接受并交付【接收方紧急】（不考）</li>\n<li>RST复位：=1表明连接严重差错，要释放连接（不考）</li>\n<li><strong>SYN同步位</strong>：=1时表明这是一个连接请求/接受报文</li>\n<li><strong>FIN终止位</strong>：=1时表明发送方数据已经发完，要求释放连接</li>\n</ul>\n</li>\n<li><strong>窗口</strong>：<strong>发送方的接收窗口</strong>，即发送放现在允许对方发送的数据量，单位1字节</li>\n<li>校验和：检验首部+数据，要加上12B伪首部（其中伪首部第四个字段为6）<img src=\"image-20250101202339846.png\" alt=\"image-20250101202339846\" style=\"zoom:67%;\" /> <strong>伪首部长这样</strong></li>\n<li>紧急指针：URG=1时有意义，本报文段紧急数据的字节数</li>\n<li>选项：长度可变，可以有最大报文长度、窗口扩大、时间戳等</li>\n<li>填充：使得首部是4字节（32位）的整数倍</li>\n</ul>\n<h3 id=\"TCP连接管理\">TCP连接管理</h3>\n<p>连接建立→数据传送→连接释放</p>\n<h4 id=\"TCP连接建立（三次握手协议）\">TCP连接建立（三次握手协议）</h4>\n<img src=\"image-20250101151837970.png\" alt=\"image-20250101151837970\" style=\"zoom:67%;\" /> \n<ol>\n<li>客户端发送连接请求【<strong>同步位</strong>SYN=1，初始<strong>序号</strong>seq=x（随机）】，无应用层数据，客户端进入SYN-SENT（同步已发送）状态</li>\n<li>服务器若同意，返回确认报文段【<strong>同步位</strong>SYN=1，<strong>确认位</strong>ACK=1，<strong>序号</strong>seq=y（随机），<strong>确认号</strong>ack=x+1】，无应用层数据，服务器进入SYN-RCVD（同步收到）状态</li>\n<li>客户端返回确认的确认【<strong>同步位</strong>SYN=0，<strong>确认位</strong>ACK=1，<strong>序号</strong>seq=x+1，<strong>确认号</strong>ack=y+1】，客户端为TCP分配缓存和变量，<strong>可携带应用层数据</strong></li>\n</ol>\n<h4 id=\"TCP连接释放（四次握手）\">TCP连接释放（四次握手）</h4>\n<img src=\"image-20250101152842674.png\" alt=\"image-20250101152842674\" style=\"zoom:67%;\" /> \n<ol>\n<li><strong>客户端</strong>发送连接释放报文【<strong>终止位</strong>FIN=1，<strong>序号</strong>seq=u（等于前面的序号+1）】，进入FIN-WAIT-1状态</li>\n<li><strong>服务器</strong>返回确认报文段【<strong>确认位</strong>ACK=1，序号seq=v，<strong>确认号</strong>ack=u+1】，服务器进入<strong>CLOSE-WAIT（半关闭状态）</strong>，这个时候<strong>服务器还能向客户端发送数据</strong></li>\n<li><strong>服务器</strong>发完数据，发出连接释放报文【<strong>终止位</strong>FIN=1，<strong>确认位</strong>ACK=1，<strong>序号</strong>seq=w，<strong>确认号</strong>ack=u+1】，进入LAST-ACK（最后确认）状态</li>\n<li><strong>客户端</strong>返回确认报文段【<strong>确认位</strong>ACK=1，<strong>序号</strong>seq=u+1，<strong>确认号</strong>ack=w+1】，客户端等待2 * MSL（最长报文段寿命）的时间后，彻底关闭</li>\n</ol>\n<h3 id=\"TCP可靠传输\">TCP可靠传输</h3>\n<p>网络层不可靠</p>\n<p>传输层TCP实现可靠传输</p>\n<p><strong>序号</strong></p>\n<p>每个字节都有一个序号</p>\n<p>序号字段是第一个字节的序号</p>\n<p><strong>确认</strong></p>\n<p>发送方发完了数据先放进缓存，直到确认了再删</p>\n<p><strong>重传</strong></p>\n<ul>\n<li>**超时重传：**TCP采用一种自适应算法，记录一个报文段发出的时间和确认的时间，时间差为RTT（往返时间），TCP会维护一个加权平均往返时间RTTS，随着样本值变化而变化。超时重传时间略大于RTTs</li>\n<li>**冗余ACK：**每当比期望序号打的失序报文段到达，发送一个冗余ACK，指明期待收到的下一个序号，发送方收到了这个ACK后立刻重传不用等超时</li>\n</ul>\n<h3 id=\"TCP流量控制\">TCP流量控制</h3>\n<p>哦又是<u>熟悉</u>的协议！</p>\n<p><strong>停止等待协议</strong></p>\n<img src=\"image-20241229152854873.png\" alt=\"image-20241229152854873\" style=\"zoom:67%;\" /> \n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>信道利用率</mtext><mi>U</mi><mo>=</mo><mfrac><msub><mi>T</mi><mi>D</mi></msub><mrow><msub><mi>T</mi><mi>D</mi></msub><mo>+</mo><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><msub><mi>T</mi><mi>A</mi></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">信道利用率U=\\frac{T_D}{T_D+RTT+T_A}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord cjk_fallback\">信</span><span class=\"mord cjk_fallback\">道</span><span class=\"mord cjk_fallback\">利</span><span class=\"mord cjk_fallback\">用</span><span class=\"mord cjk_fallback\">率</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.19633em;vertical-align:-0.8360000000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.3139999999999996em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">A</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8360000000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p><strong>流水线传输</strong></p>\n<p>这不是我们滑动窗口吗</p>\n<img src=\"image-20250101171246593.png\" alt=\"image-20250101171246593\" style=\"zoom: 50%;\" /> \n<p>以<strong>字节为单位</strong>的滑动窗口</p>\n<ol>\n<li>根据接收方给出的窗口值，构造自己的发送窗口</li>\n<li>发送数据</li>\n<li>收到确认前移</li>\n</ol>\n<p>发送窗口并不总是和接收窗口一样大（因为时间滞后）</p>\n<p><u><strong>发送窗口取接受窗口和拥塞窗口的最小值</strong></u></p>\n<p><strong>发送缓存</strong>用于暂时存放准备发的发送数据和TCP发出但没确认的数据</p>\n<p><strong>接收缓存</strong>用于存没按序到达的数据和被接受但没被应用读取的数据</p>\n<img src=\"image-20250101173640333.png\" alt=\"image-20250101173640333\" style=\"zoom:67%;\" /> \n<p>报文中窗口参数 rwnd 单位字节</p>\n<p>TCP有一个计时器，如果收到rwnd=0后，会启动计时器，一段时间后发送零窗口探测报文段，对方会再次给出当前窗口值</p>\n<h3 id=\"TCP拥塞控制\">TCP拥塞控制</h3>\n<blockquote>\n<p>[!NOTE]</p>\n<p>重要喔</p>\n</blockquote>\n<p>未按时收到确认就判定为拥塞</p>\n<p>拥塞控制控制多个发送方，流量控制控制单个发送方</p>\n<p><strong>发送窗口</strong>取接收窗口rwnd和拥塞窗口cwnd<strong>较小</strong>的一个</p>\n<h4 id=\"慢开始和拥塞避免\">慢开始和拥塞避免</h4>\n<p><strong>慢开始：</strong></p>\n<p>先预设一个ssthresh值</p>\n<p>发送方A先令cwnd=1，发一个，收到B的确认后cwnd乘以2变成2；再收到变成4</p>\n<p>cwnd<strong>指数增长</strong>，直到cwnd &gt;= ssthresh 即慢开始门限改为使用 阻塞避免算法</p>\n<p>*<u>注意：</u>*如果乘以2大于ssthresh，那么只能取ssthresh，不能指数增大超过门限</p>\n<p><strong>阻塞避免算法：</strong></p>\n<p>每收到1条确认，cwnd只+1，线性增长</p>\n<p><strong>遇到网络拥塞：</strong></p>\n<p>把ssthresh设置为拥塞时cwnd值的<strong>一半</strong>，然后让cwnd=1重新慢开始</p>\n<img src=\"image-20250101200956320.png\" alt=\"image-20250101200956320\" style=\"zoom: 67%;\" />  \n<h4 id=\"快重传和快恢复\">快重传和快恢复</h4>\n<img src=\"image-20250101201343117.png\" alt=\"image-20250101201343117\" style=\"zoom:67%;\" /> \n<p>为了尽早重传：</p>\n<p>如果连续收到三个重复的冗余ACK确认，立即重传相应的报文段</p>\n<p>ssthresh调整为当前cwnd的一半，这个时候<strong>不会慢开始</strong>，采用快恢复</p>\n<p><strong>快恢复：</strong></p>\n<p>直接把cwnd设置为当前cwnd的一半，跳过慢开始阶段，直接开始拥塞避免加法增大</p>\n<h1>应用层</h1>\n<h2 id=\"应用模型\">应用模型</h2>\n<p><strong>C/S模型</strong></p>\n<p>服务器永久提供服务，永久性访问地址/域名</p>\n<p>服务器处于接受请求状态，收到客户机请求后处理，发送结果</p>\n<p>客户机之间不通信</p>\n<p>可扩展性不佳</p>\n<p><strong>P2P模型</strong></p>\n<p>莫得服务器，全是客户机，都可以请求服务，都可以提供服务</p>\n<p>任意两点都可以直接通讯，节点可能改变IP地址</p>\n<p>可扩展性好</p>\n<p>网络健壮性强，失去一个节点也不会网络失效</p>\n<h2 id=\"域名解析DNS系统\">域名解析DNS系统</h2>\n<p>使用UDP</p>\n<p><a href=\"http://www.baidu.com\">www.baidu.com</a></p>\n<p><strong>顶级域名：</strong></p>\n<p>国家顶级域名：cn、us、jp</p>\n<p>通用顶级域名：com、net、org…</p>\n<p><strong>二级域名：</strong></p>\n<p>上述例子中的baidu</p>\n<img src=\"image-20250101211437736.png\" alt=\"image-20250101211437736\" style=\"zoom: 67%;\" /> \n<p>根域名服务器：知道所有顶级域名服务器的IP地址</p>\n<p>顶级域名服务器：一个顶级域名有很多顶级域名服务器，可以获取顶级域名下属二级域名</p>\n<p>权限域名服务器：负责一个区的域名服务器</p>\n<p>本地域名服务器：发送DNS请求的时候会先查询本地域名服务器</p>\n<ol>\n<li>主机向本地域名服务器查询</li>\n<li>本地域名服务器向根域名服务器查询，得到顶级域名服务器地址</li>\n<li>本地域名服务器向顶级域名服务器查询，得到权限域名服务器地址</li>\n<li>本地域名服务器向权限域名服务器查询，得到最终要访问的IP地址</li>\n<li>本地域名保存IP地址，返回给主机</li>\n</ol>\n<h2 id=\"FTP文件传送协议\">FTP文件传送协议</h2>\n<p>适用于不同操作系统中传输</p>\n<p>使用C/S协议模式</p>\n<p><strong>使用TCP</strong>实现可靠传输</p>\n<ol>\n<li>ftp服务器启动</li>\n<li>客户端登录ftp服务器，输入用户名密码或者匿名登陆</li>\n<li>服务器启动一个新的从属进程【包含控制进程和数据传输进程】\n<ul>\n<li>21号端口控制连接：控制发不发、终止等</li>\n<li>20号端口数据连接：传文件的\n<ul>\n<li>主动模式：连接后客户端随机开一个端口，服务器通过端口20连接客户端【默认主动】</li>\n<li>被动模式：连接后服务器随机开一个端口，客户端连接到服务器端口</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>开始传输</li>\n</ol>\n<h2 id=\"电子邮件\">电子邮件</h2>\n<img src=\"image-20250101221119568.png\" alt=\"image-20250101221119568\" style=\"zoom:67%;\" /> \n<p><strong>使用TCP</strong></p>\n<p>STMP推送邮件到服务器</p>\n<p>POP3或IMAP从服务器拉取邮件</p>\n<p><strong>STMP步骤：</strong></p>\n<ol>\n<li>发送方发到发邮件服务器</li>\n<li>发邮件服务器与接收方建立TCP连接</li>\n<li>发邮件服务器问STMP服务器是否有收件人</li>\n<li>传输邮件</li>\n<li>释放连接</li>\n</ol>\n<p>SMTP只能发ASCII码，所以要使用MIME来把非ASCII码转化为7位ASCII码</p>\n<p>**POP3或者IMAP协议：**收取邮件</p>\n<h2 id=\"HTTP协议和www\">HTTP协议和www.</h2>\n<p><strong>URL形式</strong></p>\n<p>协议://主机:端口/路径</p>\n<p>http协议是超文本传输协议，语言HTML</p>\n<p>HTTP采用 <strong><u>TCP</u></strong> 为传输层协议，但<strong>HTTP协议本身是无连接的</strong></p>\n<p><strong>非持久连接：</strong></p>\n<img src=\"image-20250101225428059.png\" alt=\"image-20250101225428059\" style=\"zoom:67%;\" />  \n<p><strong>持久连接：</strong></p>\n<img src=\"image-20250101225402193.png\" alt=\"image-20250101225402193\" style=\"zoom:67%;\" /> \n<p>HTTP请求报文面向文本，所以报文中每一个字段都是ASCII码串</p>\n<ol>\n<li>浏览器分析URL</li>\n<li>浏览器向DNS请求解析IP地址</li>\n<li>获得IP地址</li>\n<li>浏览器与服务器建立TCP连接</li>\n<li>浏览器发出取文件命令GET /index.htm</li>\n<li>服务器给出响应发文件</li>\n<li>TCP连接释放</li>\n<li>浏览器显示</li>\n</ol>\n<p><strong>请求报文</strong></p>\n<img src=\"image-20250101225839920.png\" alt=\"image-20250101225839920\" style=\"zoom: 67%;\" /> \n<p><strong>响应报文</strong></p>\n<img src=\"image-20250101225853337.png\" alt=\"image-20250101225853337\" style=\"zoom:67%;\" /> \n<p>1xx表示通知信息</p>\n<p>2xx表示成功（如200、202）</p>\n<p>3xx表示重定向（如301）</p>\n<p>4xx表示客户差错（如404）</p>\n<p>5xx表示服务器差错</p>\n<h1>完结撒花</h1>\n<img src=\"我要成为高手.png\" alt=\"我要成为高手\"  />",
            "tags": [
                "大学",
                "总结",
                "计网"
            ]
        }
    ]
}